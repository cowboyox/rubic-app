<section class="form-section">
  <!--first-->
  <div class="form-section__row form-section-row">
    <div class="form-section__block form-section-block">
      <div class="form-section-block__input-container input-container">
        <label class="input-container__label" for="date-input-id">Closing date</label>

        <input
          class="input-container__input input-container__input_date"
          id="date-input-id"
          matInput
          [matDatepicker]="$any(datePicker)"
          [min]="minClosingDate"
          (dateChange)="onDateChange()"
          readonly
          [(ngModel)]="closingDate"
          (click)="datePicker.open()"
        />

        <mat-datepicker #datePicker></mat-datepicker>
      </div>
    </div>

    <div class="form-section__block form-section-block">
      <div class="form-section-block__input-container input-container">
        <label class="input-container__label" for="time-input-id">Closing time (utc)</label>

        <input
          class="input-container__input input-container__input_time"
          id="time-input-id"
          [ngxTimepicker]="timePicker"
          [format]="24"
          [min]="minClosingTime"
          readonly
          [(ngModel)]="closingTime"
          (ngModelChange)="onTimeChange()"
        />

        <ngx-material-timepicker #timePicker></ngx-material-timepicker>
      </div>
    </div>

    <div class="form-section__block form-section-block form-section-block_deal">
      <div class="form-section-block__input-container input-container">
        <label class="input-container__label" for="is-public-checkbox-id">Public deal</label>
        <input
          type="checkbox"
          class="input-container__checkbox input-container__checkbox_hidden"
          id="is-public-checkbox-id"
          [ngModel]="tradeForm.isPublic"
          (ngModelChange)="onIsPublicChange($event)"
        />

        <label
          class="input-container__input input-container__input_checkbox input-checkbox"
          [ngClass]="{ 'input-checkbox_not-checked': !tradeForm.isPublic }"
          for="is-public-checkbox-id"
        >
          <span>{{ tradeForm.isPublic ? 'Yes' : 'No' }}</span>

          <span
            class="input-checkbox__image"
            [ngClass]="{ 'input-checkbox__image_not-checked': !tradeForm.isPublic }"
          ></span>
        </label>
      </div>

      <div class="form-section-block__description-container description-container">
        <span class="description-container__dash">&ndash;</span>
        <span>Trade will be listed on the main page</span>
      </div>
    </div>

    <div class="form-section__block form-section-block form-section-block_button">
      <app-advanced-options-button
        [(isOpened)]="areAdvancedOptionsOpened"
      ></app-advanced-options-button>
    </div>
  </div>

  <div class="form-section__advanced-options" *ngIf="areAdvancedOptionsOpened">
    <!--second-->
    <div class="form-section__row form-section-row" *ngIf="!tradeForm.areAmountsAndTokensSet">
      <div class="form-section-row__prompt">
        Please specify tokens and required amounts to see the advanced options
      </div>
    </div>

    <!--second-->
    <div
      class="form-section__row form-section-row form-section-row_second"
      *ngIf="tradeForm.areAmountsAndTokensSet"
    >
      <div class="form-section__block form-section-block">
        <div class="form-section-block__input-container input-container">
          <label class="input-container__label" for="from-min-contribute-input-id">
            Minimum contribution in {{ tradeForm.token.from.symbol }}
          </label>

          <input
            class="input-container__input input-container__input_min-contribute input-container__input_validated"
            id="from-min-contribute-input-id"
            placeholder="Enter amount"
            appNumberPrecision
            [inputElement]="fromMinContributeInput"
            [decimalLength]="tradeForm.token.from.decimals"
            [maxValue]="tradeForm.token.from.amount"
            [ngModel]="tradeForm.token.from.minContribution | bigNumberFormat"
            (ngModelChange)="onMinContributeChange('from', $event)"
            #fromMinContributeModel="ngModel"
            [ngClass]="{
              'input-container__input_invalid': fromMinContributeModel.invalid
            }"
            #fromMinContributeInput
          />
        </div>
      </div>

      <div class="form-section__block form-section-block">
        <div class="form-section-block__input-container input-container">
          <label class="input-container__label" for="to-min-contribute-input-id">
            Minimum contribution in {{ tradeForm.token.to.symbol }}
          </label>

          <input
            class="input-container__input input-container__input_min-contribute input-container__input_validated"
            id="to-min-contribute-input-id"
            placeholder="Enter amount"
            appNumberPrecision
            [inputElement]="toMinContributeInput"
            [decimalLength]="tradeForm.token.to.decimals"
            [maxValue]="tradeForm.token.to.amount"
            [ngModel]="tradeForm.token.to.minContribution | bigNumberFormat"
            (ngModelChange)="onMinContributeChange('to', $event)"
            #toMinContributeModel="ngModel"
            [ngClass]="{
              'input-container__input_invalid': toMinContributeModel.invalid
            }"
            #toMinContributeInput
          />
        </div>
      </div>
    </div>

    <!--third-->
    <div
      class="form-section__row form-section-row form-section-row_third"
      *ngIf="tradeForm.areAmountsAndTokensSet"
    >
      <div class="form-section__block form-section-block form-section-block_full">
        <div class="form-section-block__input-container input-container">
          <label class="input-container__label" for="is-with-broker-fee-checkbox-id">
            Broker Fee
          </label>

          <input
            type="checkbox"
            class="input-container__checkbox input-container__checkbox_hidden"
            id="is-with-broker-fee-checkbox-id"
            [ngModel]="tradeForm.isWithBrokerFee"
            (ngModelChange)="onIsWithBrokerFeeChange($event)"
          />

          <label
            class="input-container__input input-container__input_checkbox input-checkbox"
            [ngClass]="{ 'input-checkbox_not-checked': !tradeForm.isWithBrokerFee }"
            for="is-with-broker-fee-checkbox-id"
          >
            <span>{{ tradeForm.isWithBrokerFee ? 'Yes' : 'No' }}</span>

            <span
              class="input-checkbox__image"
              [ngClass]="{ 'input-checkbox__image_not-checked': !tradeForm.isWithBrokerFee }"
            ></span>
          </label>
        </div>

        <div class="form-section-block__description-container description-container">
          <span class="description-container__dash">&ndash;</span>
          <span>You can specify % for Broker</span>
        </div>
      </div>

      <div class="form-section-row__broker-data" *ngIf="tradeForm.isWithBrokerFee">
        <div class="form-section__block form-section-block form-section-block_full">
          <div
            class="form-section-block__input-container input-container input-container_broker-address"
          >
            <label
              class="input-container__label input-container__label_broker-address"
              for="broker-fee-address-input-id"
            >
              Broker Address
            </label>

            <input
              class="input-container__input input-container__input_broker-address input-container__input_validated"
              id="broker-fee-address-input-id"
              placeholder="0xD0593B233Be4411A236F22b42087345E1137170b"
              pattern="0x[0-9a-fA-F]{40}"
              [ngModel]="tradeForm.brokerAddress"
              (ngModelChange)="onBrokerAddressChange($event)"
              #brokerAddressModel="ngModel"
              [ngClass]="{
                'input-container__input_invalid':
                  !brokerAddressModel.value || brokerAddressModel.invalid
              }"
            />
          </div>
        </div>

        <div class="form-section__block form-section-block">
          <div
            class="form-section-block__input-container input-container input-container_broker-percent"
          >
            <label class="input-container__label" for="from-broker-percent-input-id">
              Specify % for {{ tradeForm.token.from.symbol }}
            </label>

            <input
              class="input-container__input input-container__input_broker-percent input-container__input_validated"
              id="from-broker-percent-input-id"
              appNumberPrecision
              [inputElement]="fromBrokerPercentInput"
              integerLength="2"
              decimalLength="2"
              maxValue="50"
              [ngModel]="tradeForm.token.from.brokerPercent"
              (ngModelChange)="onBrokerPercentChange('from', $event)"
              #fromBrokerPercentModel="ngModel"
              [ngClass]="{
                'input-container__input_invalid': fromBrokerPercentModel.invalid
              }"
              #fromBrokerPercentInput
            />

            <span class="input-container__percent-sign">%</span>

            <span class="input-container__calculation">
              You will get: <br />
              {{ getBrokerPercent('from') }} {{ tradeForm.token.from.name }}
            </span>
          </div>
        </div>

        <div class="form-section__block form-section-block">
          <div
            class="form-section-block__input-container input-container input-container_broker-percent"
          >
            <label class="input-container__label" for="to-broker-percent-input-id">
              Specify % for {{ tradeForm.token.to.symbol }}
            </label>

            <input
              class="input-container__input input-container__input_broker-percent input-container__input_validated"
              id="to-broker-percent-input-id"
              appNumberPrecision
              [inputElement]="toBrokerPercentInput"
              integerLength="2"
              decimalLength="2"
              maxValue="50"
              [ngModel]="tradeForm.token.to.brokerPercent"
              (ngModelChange)="onBrokerPercentChange('to', $event)"
              #toBrokerPercentModel="ngModel"
              [ngClass]="{
                'input-container__input_invalid': toBrokerPercentModel.invalid
              }"
              #toBrokerPercentInput
            />

            <span class="input-container__percent-sign">%</span>

            <span class="input-container__calculation">
              You will get: <br />
              {{ getBrokerPercent('to') }} {{ tradeForm.token.to.name }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
