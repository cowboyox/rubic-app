<ng-container>
  <div class="swaps-form">
    <header *noFrame class="swaps-form__header">
      <h1 class="swaps-form__title">
        {{ (isInstantTrade ? 'instantTrades.title' : 'bridgePage.title') | translate }}
      </h1>
      <app-rubic-refresh-button
        class="swaps-form__refresh"
        type="autoRefresh"
        *ngIf="isInstantTrade && allowTrade && allowRefresh"
        (onRefresh)="onRefreshTrade.next()"
        [loadingStatus]="loadingStatus"
        [autoUpdate]="autoRefresh"
      ></app-rubic-refresh-button>

      <app-gas-indicator *ngIf="isMobile$ | async"></app-gas-indicator>
      <div class="swaps-form__settings">
        <app-settings-container></app-settings-container>
      </div>
    </header>

    <main class="swaps-form__content">
      <app-swaps-header
        *noFrame
        [fromBlockchain]="fromBlockchain"
        [toBlockchain]="toBlockchain"
        [swapType]="swapType"
      ></app-swaps-header>

      <div class="swaps-form__block">
        <app-iframe-blockchain-indicator [blockchain]="fromBlockchain" *onlyFrame="'horizontal'"></app-iframe-blockchain-indicator>

        <app-token-amount-input
          *noFrame="'vertical'"
          [token]="selectedToken.from"
          [amount]="selectedFromAmount"
          (amountChange)="onTokenInputAmountChange($event)"
          [loading]="isLoading"
          [tokens]="availableTokens['from']"
          [formService]="swapFormService"
        ></app-token-amount-input>

        <app-vertical-iframe-token-amount-input
          *onlyFrame="'vertical'"
          [token]="selectedToken.from"
          [amount]="selectedFromAmount"
          (amountChange)="onTokenInputAmountChange($event)"
          [loading]="isLoading"
          [tokens]="availableTokens['from']"
          [formService]="swapFormService"
        ></app-vertical-iframe-token-amount-input>
      </div>

      <div class="swaps-form__delimiter">
        <app-rubic-switcher (onClick)="revert()"></app-rubic-switcher>
      </div>

      <div class="swaps-form__block">
        <app-iframe-blockchain-indicator  *onlyFrame="'horizontal'" [blockchain]="toBlockchain"></app-iframe-blockchain-indicator>

        <app-instant-trade-bottom-form
          *ngIf="isInstantTrade"
          [onRefreshTrade]="onRefreshTrade"
          [loading]="isLoading"
          [tokens]="availableTokens['to']"
          [formService]="swapFormService"
          (onRefreshStatusChange)="loadingStatus = $event"
          (allowRefreshChange)="allowRefresh = $event"
        ></app-instant-trade-bottom-form>

        <app-bridge-bottom-form
          *ngIf="!isInstantTrade"
          [loading]="isLoading"
          [tokens]="availableTokens['to']"
          [formService]="swapFormService"
        ></app-bridge-bottom-form>

      </div>
    </main>
  </div>

  <app-analytics-link *noFrame [formService]="swapFormService"></app-analytics-link>

  <app-rubic-volume *noFrame></app-rubic-volume>
</ng-container>
