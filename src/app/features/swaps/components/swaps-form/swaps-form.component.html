<div class="swaps-form">
  <header class="swaps-form__header">
    <h1 class="swaps-form__title">
      {{ (isInstantTrade ? 'instantTrades.title' : 'bridgePage.title') | translate }}
    </h1>
    <app-rubic-refresh-button
      *ngIf="isInstantTrade && allowTrade"
      type="autoRefresh"
      class="swaps-form__refresh"
      [loadingStatus]="loadingStatus"
      [autoUpdate]="autoRefresh"
      (onRefresh)="onRefreshTrade.next()"
    ></app-rubic-refresh-button>

    <app-gas-indicator *ngIf="isMobile$ | async"></app-gas-indicator>
    <div class="swaps-form__settings">
      <app-settings-container></app-settings-container>
    </div>
  </header>

  <main class="swaps-form__content">
    <app-swaps-header
      [fromBlockchain]="fromBlockchain"
      [toBlockchain]="toBlockchain"
      [swapType]="swapType"
    ></app-swaps-header>

    <app-token-amount-input
      [token]="selectedToken.from"
      [amount]="selectedFromAmount"
      (amountChange)="onTokenInputAmountChange($event)"
      [loading]="isLoading"
      [tokens]="availableTokens['from']"
      [formService]="swapFormService"
    ></app-token-amount-input>

    <div class="swaps-form__delimiter">
      <app-rubic-switcher (onClick)="revert()"></app-rubic-switcher>
    </div>

    <app-instant-trade-bottom-form
      *ngIf="isInstantTrade"
      [onRefreshTrade]="onRefreshTrade"
      (onRefreshStatusChange)="loadingStatus = $event"
      [loading]="isLoading"
      [tokens]="availableTokens['to']"
      [formService]="swapFormService"
    ></app-instant-trade-bottom-form>

    <app-bridge-bottom-form
      *ngIf="!isInstantTrade"
      [loading]="isLoading"
      [tokens]="availableTokens['to']"
      [formService]="swapFormService"
    ></app-bridge-bottom-form>
  </main>
</div>

<app-analytics-link [formService]="swapFormService"></app-analytics-link>

<app-rubic-volume></app-rubic-volume>
