
<div class="active-swaps_container">
  <a class="btn btn-yellow btn__auto-width float-right" routerLink="create-v3" style="margin-top: -10px;">
    <img class="arrow" src="./assets/images/buttons/arrow_b.svg">
    <span>
      Create SWAP
    </span>
  </a>
  <div class="title-section" *ngIf="contractsList && contractsList.length">

    OTC Order Book&nbsp;&nbsp;&nbsp;

    <button class="refresh-btn" (click)="refreshList()"
            [ngClass]="{progress: refreshProgress}"
            [disabled]="!(contractsList && contractsList.length && (contractsCount === contractsList.length))">
      <img class="arrow" src="./assets/images/icons/refresh.svg">
    </button>

  </div>

  <div class="public-progress-loading" *ngIf="!allLoaded && contractsList && (contractsCount !== contractsList.length)">
    <span [ngStyle]="{width: (contractsCount / contractsList.length) * 100 + '%'}"></span>
  </div>

  <div class="public-swaps_table-container"
       [hidden]="!allLoaded && !(contractsList && contractsList.length && (contractsCount === contractsList.length))">

    <div class="grid-row public-swaps_row">
      <div class="grid-cell grid-cell-1-4 public-swaps_head-cell">
        <div class="titles-coins">SEND</div>
        <div class="titles-coins">GET</div>
      </div>
    </div>

    <div class="public-swaps">
      <div class="grid-row public-swaps_head-row">
        <div class="grid-cell grid-cell-1-4 public-swaps_head-cell">
          <div class="public-swaps_head_content">
            <div class="coin-filters">
              <div class="coin-filter coin-filter__left">
                <app-coins-list
                  (TokenChange)="selectCoin()"
                  [(tokenModel)]="selectedCoins.base"></app-coins-list>
              </div>
              <div class="coin-filter coin-filter__right">
                <app-coins-list
                  (TokenChange)="selectCoin()"
                  [(tokenModel)]="selectedCoins.quote"></app-coins-list>
              </div>
              <button class="coin-filters_btn" (click)="revertCoinFilters()"><span></span></button>
            </div>
          </div>
        </div>
        <div class="grid-cell grid-cell-1-2 public-swaps_head-cell"
             [ngClass]="{'public-swaps_head-cell__sortable': selectedFilter.name === 'volume', 'asc': selectedFilter.asc}">
          <div class="public-swaps_head_content bold">
            <button class="sort-btn" (click)="applySort('volume')">
              <span></span>
            </button>
            Volume
          </div>
        </div>
        <div class="grid-cell grid-cell-1-8 public-swaps_head-cell">
          <div class="public-swaps_head_content bold text-center">
            Decentralized
          </div>
        </div>
        <div class="grid-cell grid-cell-1-8 public-swaps_head-cell"
             [ngClass]="{'public-swaps_head-cell__sortable': selectedFilter.name === 'expired', 'asc': selectedFilter.asc}">
          <div class="public-swaps_head_content bold text-center">
            <button class="sort-btn" (click)="applySort('expired')">
              <span></span>
            </button>
            Expire in
          </div>
        </div>
        <div class="clearfix-block"></div>
      </div>


      <div class="public-swaps_body"
           *ngIf="allLoaded || (contractsList && contractsList.length && (contractsCount === contractsList.length))">

        <div class="grid-row public-swaps_row as-link"
           *ngFor="let contract of displayingContractsList"
           [routerLink]="(!contract.contract_details.swap3 ? 'public/' : 'public-v3/') + contract.contract_details.unique_link">
          <div class="grid-cell grid-cell-1-8 public-swaps_cell">
            <div class="public-swaps_cell_content">
              <div class="swap-info swap-info_token-name">
                <img class="swap-info__token-name_icon"
                     [src]="contract.contract_details.base_token_info.image_link || './assets/images/icons/coins/empty.svg'">
                <span class="swap-info__token-name_symbol">
                  {{contract.contract_details.base_token_info.token_short_name}}
                </span>
              </div>
            </div>
          </div>

          <div class="grid-cell grid-cell-1-8 public-swaps_cell">
            <div class="public-swaps_cell_content">
              <div class="swap-info swap-info__token-name">
                <img class="swap-info__token-name_icon"
                     [src]="contract.contract_details.quote_token_info.image_link || './assets/images/icons/coins/empty.svg'">
                <span class="swap-info__token-name_symbol">
                  {{contract.contract_details.quote_token_info.token_short_name}}
                </span>
              </div>
            </div>
          </div>
          <div class="grid-cell grid-cell-1-4 public-swaps_cell">
            <div class="public-swaps_cell_content">
              <div class="swap-info swap-info__token-volume text-right">
                <div class="swap-info swap-info__token-volume_value">
                  {{contract.contract_details.base_token_info.amount | number }}
                  {{contract.contract_details.base_token_info.token_short_name}}
                </div>
                <div class="swap-info swap-info__token-volume_rate">
                  {{contract.contract_details.base_token_info.rate}}
                  {{contract.contract_details.base_token_info.token_short_name}}
                  / 1 {{contract.contract_details.quote_token_info?.token_short_name}}
                </div>
              </div>
            </div>
          </div>
          <div class="grid-cell grid-cell-1-4 public-swaps_cell">
            <div class="public-swaps_cell_content">
              <div class="swap-info swap-info__token-volume swap-info__token-volume__with-icon text-left">
                <div class="swap-info swap-info__token-volume_value">
                  {{contract.contract_details.quote_token_info.amount | number }}
                  {{contract.contract_details.quote_token_info.token_short_name}}
                </div>
                <div class="swap-info swap-info__token-volume_rate">
                  {{contract.contract_details.quote_token_info.rate}}
                  {{contract.contract_details.quote_token_info.token_short_name}}
                  / 1 {{contract.contract_details.base_token_info?.token_short_name}}
                </div>
              </div>
            </div>
          </div>
          <div class="grid-cell grid-cell-1-8 public-swaps_cell">
            <div class="public-swaps_cell_content text-center">
              <div class="swap-info">
                {{contract.contract_details.isDecentralized ? 'YES' : 'NO'}}
              </div>
            </div>
          </div>
          <div class="grid-cell grid-cell-1-8 public-swaps_cell">
            <div class="public-swaps_cell_content text-center">
              <div class="swap-info" *ngIf="contract.contract_details.left_times">
                {{contract.contract_details.left_times.times_parts[0]}}d:
                {{contract.contract_details.left_times.times_parts[1]}}h:
                {{contract.contract_details.left_times.times_parts[2]}}m
              </div>
            </div>
          </div>
        </div>

        <br/>
        <button class="btn btn-white-opacity width-100 white-border"
                (click)="showSelectedPages(true)"
                *ngIf="displayingContractsList.length < allFilteredOrdersCount.length">
          <span>
            Show more
          </span>
        </button>

      </div>


      <div class="public-swaps_empty" *ngIf="contractsList?.length && !displayingContractsList?.length">
        There is no matching pair, please
        <a routerLink="/trades/create">create your own</a>
      </div>

    </div>
  </div>
</div>
