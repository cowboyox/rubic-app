<div class="tokens-table">
  <div class="tokens-table__title-section">
    <h2 class="tokens-table__title">{{ title }}</h2>
    <button
      class="tokens-table__refresh-button refresh-btn"
      [ngClass]="{ 'tokens-table__refresh-button_animated': tableLoading  }"
      (click)="refreshTable()">
      <img class="arrow" src="./assets/images/icons/refresh.svg" />
    </button>
  </div>
  <!-- Desktop table -->
  <table
    *ngIf="($isMobile | async) === false"
    mat-table
    matSort
    [dataSource]="sotredTableData"
    (matSortChange)="sortData($event)"
    class="table order-books"
  >
    <colgroup>
      <ng-container>
        <col *ngFor="let size of columnsSizes " [style.width]="size" />
      </ng-container>
    </colgroup>
    <!-- Status column  -->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef class="centered-child"  mat-sort-header>
        <div class="tokens-table__cell">
          {{ 'Status' | translate }}
        </div>
      </th>
      <td *matCellDef="let element">
        <a routerLink="/public-v3/{{ element.uniqueLink }}">
          <div class="tokens-table__cell tokens-table__cell_status">
            <span
              class="tokens-table__status"
              *ngIf="element.status"
              [ngClass]="getClassName(element.status)"
            ></span>
            {{ element.status }}
          </div>
        </a>
      </td>
    </ng-container>
    <!-- Tokens icons column  -->
    <ng-container matColumnDef="token">
      <th mat-header-cell *matHeaderCellDef #tokensHeader matAutocompleteOrigin>
        <app-coins-filter (selectTokenEvent)="selectToken($event)"></app-coins-filter>
      </th>
      <td *matCellDef="let element">
        <a routerLink="/public-v3/{{ element.uniqueLink }}">
          <app-tokens-cell [token]="element.token"></app-tokens-cell>
        </a>
      </td>
    </ng-container>
    <!-- Tokens amount column  -->
    <ng-container matColumnDef="amount">
      <th mat-header-cell *matHeaderCellDef class="centered-child">
        <div class="tokens-table__cell">
          {{ 'Volume' | translate }}
        </div>
      </th>
      <td *matCellDef="let element" class="centered-child clickable">
        <a routerLink="/public-v3/{{ element.uniqueLink }}">
          <app-volume-cell [token]="element.token"></app-volume-cell>
        </a>
      </td>
    </ng-container>
    <!-- Network column  -->
    <ng-container matColumnDef="network">
      <th mat-header-cell *matHeaderCellDef class="centered-child">
        <div class="tokens-table__cell">
          {{ 'Network' | translate }}
        </div>
      </th>
      <td *matCellDef="let element" class="centered-child">
        <a routerLink="/public-v3/{{ element.uniqueLink }}">
          <div class="tokens-table__cell">
            <img
              class="table__image"
              [src]="getChainIcon(element.blockchain)"
              alt="{{ element.blockchain }}"
            />
          </div>
        </a>
      </td>
    </ng-container>
    <!-- Expires in column  -->
    <ng-container matColumnDef="expires">
      <th mat-header-cell *matHeaderCellDef class="centered-child" mat-sort-header>
        <div class="tokens-table__cell">
          {{ 'Expires in' | translate }}
        </div>
      </th>
      <td *matCellDef="let element" class="centered-child">
        <a routerLink="/public-v3/{{ element.uniqueLink }}">
          <div class="tokens-table__cell tokens-table__cell_datetime">
            {{ element.expiresIn.days() }}d: {{ element.expiresIn.hours() }}h: {{ element.expiresIn.minutes() }}m
          </div>
        </a>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr
      mat-row
      *matRowDef="let row; columns: displayedColumns "
    ></tr>
  </table>
  <!-- Mobile table -->
  <div *ngIf="$isMobile | async" class="bridge-list">
    <app-dropdown-select
      [options]="sortableColumns"
      [isSortable]="true"
      [minOptionWidth]="89"
      (optionToSortBy)="onSortClick($event)"
    ></app-dropdown-select>
  
    <div class="bridge-list__items">
      <div class="bridge-list__accordion accordion" *ngFor="let trade of tokensTableData">
        <div
          class="accordion__header header"
          [ngClass]="{ accordion__header_active: trade.opened }"
          (click)="trade.opened = !trade.opened"
        >
          <span
            class="data__status"
            [ngClass]="{
              data__status_green: trade.code === 2,
              data__status_yellow: trade.code === 1,
              data__status_red: trade.code === 0
            }"
          >
            {{ trade.status }}
          </span>
  
          <div class="header__option option" [ngClass]="{ header__option_inactive: trade.opened }">
            <span
              class="option__name"
              *ngIf="selectedOption !== 'Status' && selectedOption !== 'Date'"
            >
              selectedOption
            </span>
  
            <div class="data__network" *ngIf="selectedOption === 'From'">
              <img
                [src]="trade.token.base.image || '/assets/images/icons/coins/empty.svg'"
                [alt]="trade.token.base.symbol"
              />
              <span>{{ trade.token.base.symbol }}</span>
            </div>
  
            <div class="data__network" *ngIf="selectedOption === 'To'">
              <img
                src="assets/images/icons/coins/eth.png"
                alt=""
              />
              <span>label to</span>
            </div>
  
            <div class="data__amount" *ngIf="selectedOption === 'Spent'">
              <div>from amount}</div>
              <img src="assets/images/icons/coins/eth.png" alt="" />
              <span>symbol</span>
            </div>
  
            <div class="data__amount" *ngIf="selectedOption === 'Expected'">
              <div>actual amount</div>
              <img src="assets/images/icons/coins/eth.png" alt="" />
              <span>aymbol</span>
            </div>
  
            <div class="data__date" *ngIf="selectedOption === 'Date'">
              <div>
                <span>time</span>
                <br />
                <span>time 2</span>
              </div>
            </div>
          </div>
  
          <div class="header__plus" *ngIf="!trade.opened">+</div>
  
          <div class="header__minus" *ngIf="trade.opened">-</div>
        </div>
  
        <div
          class="accordion__content content"
          [ngClass]="{ accordion__content_inactive: !trade.opened }"
        >
          <div class="content__item">
            <div class="content__item-name">From</div>
            <div class="data__network">
              <img
                [src]="trade.token.base.image || '/assets/images/icons/coins/empty.svg'"
                [alt]="trade.token.base.symbol"
              />
              <span>{{ trade.token.base.symbol }}</span>
            </div>
          </div>
  
          <div class="content__item">
            <div class="content__item-name">To</div>
            <div class="data__network">
              <img
                [src]="trade.token.quote.image || '/assets/images/icons/coins/empty.svg'"
                [alt]="trade.token.quote.symbol"
              />
              <span>{{ trade.token.quote.symbol }}</span>
            </div>
          </div>
  
          <div class="content__item">
            <div class="content__item-name">Spent</div>
            <div class="data__amount">
              <div>{{ trade.token.base.amountTotal.dp(8) }} {{ trade.token.base.symbol }}</div>
              <span>
                {{ trade.token.base.amountTotal.div(trade.token.quote.amountTotal).dp(8) | bigNumberFormat }}
                <span class="volume-cell__subtext-with-spacing">{{ trade.token.base.symbol }} / 1</span>
                {{ trade.token.quote.symbol }}
              </span>
            </div>
          </div>
  
          <div class="content__item">
            <div class="content__item-name">Expected</div>
            <div class="data__amount">
              <div>{{ trade.token.quote.amountTotal.dp(8) }} {{ trade.token.quote.symbol }}</div>
              <span>
                1
                <span class="volume-cell__subtext-with-spacing">
                  {{ trade.token.base.symbol }} /
                  {{ trade.token.quote.amountTotal.div(trade.token.base.amountTotal).dp(8) | bigNumberFormat }}
                </span>
                {{ trade.token.quote.symbol }}
              </span>
            </div>
          </div>
  
          <div class="content__item">
            <div class="content__item-name">{{ 'Network' | translate }}</div>
            <div class="data__network">
              <div>
                <img
                  class="table__image"
                  [src]="getChainIcon(trade.blockchain)"
                  alt="{{ trade.blockchain }}"
                />
                <span>{{ trade.blockchain }}</span>
              </div>
            </div>
          </div>
  
          <div class="content__item">
            <div class="content__item-name">{{ 'Expires in' | translate }}</div>
            <div class="data__date">
              <div>
                {{ trade.expirationDate | date: 'd' }}d: {{ trade.expirationDate | date: 'h' }}h:
                {{ trade.expirationDate | date: 'm' }}m
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
